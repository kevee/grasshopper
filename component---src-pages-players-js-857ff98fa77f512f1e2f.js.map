{"version":3,"sources":["webpack:///./src/utilities/player-games.js","webpack:///./src/components/common/player-list.js","webpack:///./src/pages/players.js"],"names":["player","games","lifetimeScore","lifetimeGames","Scores","forEach","score","data","Game","Score","Number_of_hops","recordId","Hops","hop","allPlayers","players","map","stats","getPlayerGames","sort","a","b","to","Player_slug","Player_Name","Math","round","query","title","allAirtable","nodes"],"mappings":"uGAAe,aAAAA,GACb,IAAMC,EAAQ,GACVC,EAAgB,EAChBC,EAAgB,EA+BpB,OA9BIH,EAAOI,QACTJ,EAAOI,OAAOC,SAAQ,SAAAC,GAChBA,EAAMC,KAAKC,OACbN,GAAiBI,EAAMC,KAAKE,MAC5BN,GAAiBG,EAAMC,KAAKC,KAAK,GAAGD,KAAKG,eAAiB,EAC1DT,EAAMK,EAAMC,KAAKC,KAAK,GAAGG,UAAzB,6BACEA,SAAUL,EAAMC,KAAKC,KAAK,GAAGG,UAC1BL,EAAMC,KAAKC,KAAK,GAAGD,MAFxB,IAGED,MAAOA,EAAMC,KAAKE,YAKtBT,EAAOY,MACTZ,EAAOY,KAAKP,SAAQ,SAAAQ,GACdA,EAAIN,KAAKC,OACXN,GAAiBW,EAAIN,KAAKE,MAC1BN,GAAiBU,EAAIN,KAAKC,KAAK,GAAGD,KAAKG,eAAiB,OACR,IAArCT,EAAMY,EAAIN,KAAKC,KAAK,GAAGG,UAChCV,EAAMY,EAAIN,KAAKC,KAAK,GAAGG,UAAvB,6BACEA,SAAUE,EAAIN,KAAKC,KAAK,GAAGG,UACxBE,EAAIN,KAAKC,KAAK,GAAGD,MAFtB,IAGED,MAAOO,EAAIN,KAAKE,QAGlBR,EAAMY,EAAIN,KAAKC,KAAK,GAAGG,UAAUL,OAASO,EAAIN,KAAKE,UAKpD,CAAER,QAAOC,gBAAeC,mB,gLC9BlB,cAAkB,IACzBW,EADwB,EAAdC,QACWC,KAAI,gBAAGT,EAAH,EAAGA,KAAH,sCAC1BA,GAD0B,IAE7BU,MAAOC,YAAeX,QAGxB,OACE,+BACE,+BACE,sCACA,qCACA,8CACA,4CAEF,+BACGO,EACEK,MAAK,SAACC,EAAGC,GAAJ,OACJD,EAAEH,MAAMf,cAAgBmB,EAAEJ,MAAMf,cAAgB,GAAK,KAEtDc,KAAI,SAAAhB,GAAM,OACT,4BACE,4BACE,kBAAC,OAAD,CAAMsB,GAAE,WAAatB,EAAOuB,aACzBvB,EAAOwB,cAGZ,4BAAKC,KAAKC,MAAmC,IAA7B1B,EAAOiB,MAAMd,eAAuB,KACpD,4BAAKH,EAAOiB,MAAMf,eAClB,4BACGuB,KAAKC,MACH1B,EAAOiB,MAAMf,cAAgBF,EAAOiB,MAAMd,cACzC,KACA,IAAM,YCrBbwB,GATE,0BAAGpB,EAAH,EAAGA,KAAH,OACb,kBAAC,IAAD,CAAQqB,MAAM,WACZ,kBAAC,IAAD,KACE,wCACA,kBAAC,EAAD,CAAYb,QAASR,EAAKsB,YAAYC,WAK1B","file":"component---src-pages-players-js-857ff98fa77f512f1e2f.js","sourcesContent":["export default player => {\n  const games = {}\n  let lifetimeScore = 0\n  let lifetimeGames = 0\n  if (player.Scores) {\n    player.Scores.forEach(score => {\n      if (score.data.Game) {\n        lifetimeScore += score.data.Score\n        lifetimeGames += score.data.Game[0].data.Number_of_hops / 3\n        games[score.data.Game[0].recordId] = {\n          recordId: score.data.Game[0].recordId,\n          ...score.data.Game[0].data,\n          score: score.data.Score,\n        }\n      }\n    })\n  }\n  if (player.Hops) {\n    player.Hops.forEach(hop => {\n      if (hop.data.Game) {\n        lifetimeScore += hop.data.Score\n        lifetimeGames += hop.data.Game[0].data.Number_of_hops / 3\n        if (typeof games[hop.data.Game[0].recordId] === 'undefined') {\n          games[hop.data.Game[0].recordId] = {\n            recordId: hop.data.Game[0].recordId,\n            ...hop.data.Game[0].data,\n            score: hop.data.Score,\n          }\n        } else {\n          games[hop.data.Game[0].recordId].score += hop.data.Score\n        }\n      }\n    })\n  }\n  return { games, lifetimeScore, lifetimeGames }\n}\n","import React from 'react'\nimport { Link } from 'gatsby'\nimport getPlayerGames from '../../utilities/player-games'\n\nexport default ({ players }) => {\n  const allPlayers = players.map(({ data }) => ({\n    ...data,\n    stats: getPlayerGames(data),\n  }))\n\n  return (\n    <table>\n      <thead>\n        <th>Player</th>\n        <th>Games</th>\n        <th>Lifetime score</th>\n        <th>Magic index</th>\n      </thead>\n      <tbody>\n        {allPlayers\n          .sort((a, b) =>\n            a.stats.lifetimeScore > b.stats.lifetimeScore ? 1 : -1\n          )\n          .map(player => (\n            <tr>\n              <td>\n                <Link to={`/player/${player.Player_slug}`}>\n                  {player.Player_Name}\n                </Link>\n              </td>\n              <td>{Math.round(player.stats.lifetimeGames * 100) / 100}</td>\n              <td>{player.stats.lifetimeScore}</td>\n              <td>\n                {Math.round(\n                  (player.stats.lifetimeScore / player.stats.lifetimeGames) *\n                    1000\n                ) / 1000}{' '}\n              </td>\n            </tr>\n          ))}\n      </tbody>\n    </table>\n  )\n}\n","import React from 'react'\nimport { Container } from '../components/common/container'\nimport Layout from '../components/layout'\nimport PlayerList from '../components/common/player-list'\nimport { graphql } from 'gatsby'\n\nexport default ({ data }) => (\n  <Layout title=\"Players\">\n    <Container>\n      <h1>Players!</h1>\n      <PlayerList players={data.allAirtable.nodes} />\n    </Container>\n  </Layout>\n)\n\nexport const query = graphql`\n  {\n    allAirtable(filter: { table: { eq: \"Players\" } }) {\n      nodes {\n        data {\n          Player_Name\n          Player_slug\n          League {\n            data {\n              Name\n            }\n          }\n          Nickname\n          Scores {\n            data {\n              Score\n              Game {\n                recordId\n                data {\n                  Date\n                  Number_of_hops\n                  Game_League {\n                    data {\n                      Name\n                      League_slug\n                    }\n                  }\n                }\n              }\n            }\n          }\n          Hops {\n            data {\n              Score\n              Game {\n                recordId\n                data {\n                  Date\n                  Number_of_hops\n                  Game_League {\n                    data {\n                      Name\n                      League_slug\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}